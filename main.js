/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  mySetting: "default"
};
var MyPlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    const statusBarItemEl = this.addStatusBarItem();
    statusBarItemEl.setText("Status Bar Text");
    this.addCommand({
      id: "open-sample-modal-simple",
      name: "Open sample modal (simple)",
      callback: () => {
        new SampleModal(this.app).open();
      }
    });
    this.addCommand({
      id: "sample-editor-command",
      name: "Sample editor command",
      editorCallback: (editor, view) => {
        console.log(editor.getSelection());
        editor.replaceSelection("Sample Editor Command");
      }
    });
    this.addCommand({
      id: "open-sample-modal-complex",
      name: "Open sample modal (complex)",
      checkCallback: (checking) => {
        const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
        if (markdownView) {
          if (!checking) {
            new SampleModal(this.app).open();
          }
          return true;
        }
      }
    });
    this.addSettingTab(new SampleSettingTab(this.app, this));
    this.registerDomEvent(document, "click", (evt) => {
      console.log("click", evt);
    });
    this.registerInterval(window.setInterval(() => console.log("setInterval"), 5 * 60 * 1e3));
    this.registerEvent(this.app.vault.on("modify", (file) => {
      var path = file.path;
      path = path.substring(0, path.lastIndexOf("/"));
      if (path == this.settings.mySetting) {
        this.UpdateFiles(file);
      }
    }));
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  UpdateFiles(file) {
    var _a;
    var tFile = this.app.vault.getFileByPath(file.path);
    var tagsArray = [];
    if (tFile instanceof import_obsidian.TFile) {
      var tagsObj = (_a = this.app.metadataCache.getCache(file.path)) == null ? void 0 : _a.tags;
      tagsObj == null ? void 0 : tagsObj.forEach((tag) => {
        tagsArray.push(tag.tag);
      });
      new import_obsidian.Notice("tags collected");
      var filesWithTags = this.FindFilesWithTag(tagsArray);
      new import_obsidian.Notice(filesWithTags.length.toString());
      filesWithTags.forEach((element) => {
        if (tFile != null) {
          this.ModifyContent(element, tFile);
        } else {
          new import_obsidian.Notice("file is null");
        }
      });
    }
  }
  async ModifyContent(file, temaplte) {
    var _a, _b;
    var templateFrontmatter = (_a = this.app.metadataCache.getFileCache(temaplte)) == null ? void 0 : _a.frontmatter;
    var fileFrontmatter = (_b = this.app.metadataCache.getFileCache(file)) == null ? void 0 : _b.frontmatter;
    if (templateFrontmatter != void 0) {
      var templateProperties = Object.keys(templateFrontmatter);
      var fileContent = [];
      await Promise.resolve(this.app.vault.read(file)).then((content) => {
        fileContent = content.split("---");
      });
      var newContent = "";
      if (fileContent.length > 1) {
        var fileProperties = fileContent[0];
        fileProperties = fileProperties.replace("---", "");
        for (var i = 0; i < templateProperties.length; i++) {
          if (fileProperties.includes(templateProperties[i] + ":")) {
          } else {
            fileProperties += "\n" + templateProperties[i] + ":";
          }
        }
        fileProperties = "---" + fileProperties + "\n---";
        newContent = fileProperties + fileContent[2];
      } else {
        newContent = templateFrontmatter + fileContent[0];
      }
      this.app.vault.modify(file, newContent);
      new import_obsidian.Notice("file updated");
    }
  }
  FindFilesWithTag(tags) {
    var filesWithTag = [];
    this.app.vault.getMarkdownFiles().forEach((file) => {
      var _a;
      if (file.path.substring(0, file.path.lastIndexOf("/")) == this.settings.mySetting) {
      } else {
        var fileTags = (_a = this.app.metadataCache.getCache(file.path)) == null ? void 0 : _a.tags;
        if (fileTags != void 0) {
          var fileTagsArray = [];
          fileTags == null ? void 0 : fileTags.forEach((tag) => {
            fileTagsArray.push(tag.tag);
          });
          var hasAllTags = true;
          for (var i = 0; i < tags.length; i++) {
            if (fileTagsArray.includes(tags[i])) {
            } else {
              hasAllTags = false;
              break;
            }
          }
          if (hasAllTags) {
            filesWithTag.push(file);
          }
        }
      }
    });
    return filesWithTag;
  }
};
var SampleModal = class extends import_obsidian.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.setText("Woah!");
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var SampleSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Temaplte folder").setDesc("select folder where templates are stored").addText((text) => text.setPlaceholder("Template folder").setValue(this.plugin.settings.mySetting).onChange(async (value) => {
      this.plugin.settings.mySetting = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQ29uc29sZSB9IGZyb20gJ2NvbnNvbGUnO1xuaW1wb3J0IHsgQXBwLCBEcm9wZG93bkNvbXBvbmVudCwgRWRpdG9yLCBNYXJrZG93blZpZXcsIE1vZGFsLCBOb3RpY2UsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgVEFic3RyYWN0RmlsZSwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyB0ZXh0IH0gZnJvbSAnc3RyZWFtL2NvbnN1bWVycyc7XG5cbi8vIFJlbWVtYmVyIHRvIHJlbmFtZSB0aGVzZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzIVxuXG5pbnRlcmZhY2UgTXlQbHVnaW5TZXR0aW5ncyB7XG5cdG15U2V0dGluZzogc3RyaW5nO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNeVBsdWdpblNldHRpbmdzID0ge1xuXHRteVNldHRpbmc6ICdkZWZhdWx0J1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNeVBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzO1xuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc3RhdHVzIGJhciBpdGVtIHRvIHRoZSBib3R0b20gb2YgdGhlIGFwcC4gRG9lcyBub3Qgd29yayBvbiBtb2JpbGUgYXBwcy5cblx0XHRjb25zdCBzdGF0dXNCYXJJdGVtRWwgPSB0aGlzLmFkZFN0YXR1c0Jhckl0ZW0oKTtcblx0XHRzdGF0dXNCYXJJdGVtRWwuc2V0VGV4dCgnU3RhdHVzIEJhciBUZXh0Jyk7XG5cblx0XHQvLyBUaGlzIGFkZHMgYSBzaW1wbGUgY29tbWFuZCB0aGF0IGNhbiBiZSB0cmlnZ2VyZWQgYW55d2hlcmVcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdvcGVuLXNhbXBsZS1tb2RhbC1zaW1wbGUnLFxuXHRcdFx0bmFtZTogJ09wZW4gc2FtcGxlIG1vZGFsIChzaW1wbGUpJyxcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdG5ldyBTYW1wbGVNb2RhbCh0aGlzLmFwcCkub3BlbigpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdC8vIFRoaXMgYWRkcyBhbiBlZGl0b3IgY29tbWFuZCB0aGF0IGNhbiBwZXJmb3JtIHNvbWUgb3BlcmF0aW9uIG9uIHRoZSBjdXJyZW50IGVkaXRvciBpbnN0YW5jZVxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ3NhbXBsZS1lZGl0b3ItY29tbWFuZCcsXG5cdFx0XHRuYW1lOiAnU2FtcGxlIGVkaXRvciBjb21tYW5kJyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlZGl0b3IuZ2V0U2VsZWN0aW9uKCkpO1xuXHRcdFx0XHRlZGl0b3IucmVwbGFjZVNlbGVjdGlvbignU2FtcGxlIEVkaXRvciBDb21tYW5kJyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Ly8gVGhpcyBhZGRzIGEgY29tcGxleCBjb21tYW5kIHRoYXQgY2FuIGNoZWNrIHdoZXRoZXIgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGFwcCBhbGxvd3MgZXhlY3V0aW9uIG9mIHRoZSBjb21tYW5kXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnb3Blbi1zYW1wbGUtbW9kYWwtY29tcGxleCcsXG5cdFx0XHRuYW1lOiAnT3BlbiBzYW1wbGUgbW9kYWwgKGNvbXBsZXgpJyxcblx0XHRcdGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xuXHRcdFx0XHQvLyBDb25kaXRpb25zIHRvIGNoZWNrXG5cdFx0XHRcdGNvbnN0IG1hcmtkb3duVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0XHRcdGlmIChtYXJrZG93blZpZXcpIHtcblx0XHRcdFx0XHQvLyBJZiBjaGVja2luZyBpcyB0cnVlLCB3ZSdyZSBzaW1wbHkgXCJjaGVja2luZ1wiIGlmIHRoZSBjb21tYW5kIGNhbiBiZSBydW4uXG5cdFx0XHRcdFx0Ly8gSWYgY2hlY2tpbmcgaXMgZmFsc2UsIHRoZW4gd2Ugd2FudCB0byBhY3R1YWxseSBwZXJmb3JtIHRoZSBvcGVyYXRpb24uXG5cdFx0XHRcdFx0aWYgKCFjaGVja2luZykge1xuXHRcdFx0XHRcdFx0bmV3IFNhbXBsZU1vZGFsKHRoaXMuYXBwKS5vcGVuKCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gVGhpcyBjb21tYW5kIHdpbGwgb25seSBzaG93IHVwIGluIENvbW1hbmQgUGFsZXR0ZSB3aGVuIHRoZSBjaGVjayBmdW5jdGlvbiByZXR1cm5zIHRydWVcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNhbXBsZVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuXHRcdC8vIElmIHRoZSBwbHVnaW4gaG9va3MgdXAgYW55IGdsb2JhbCBET00gZXZlbnRzIChvbiBwYXJ0cyBvZiB0aGUgYXBwIHRoYXQgZG9lc24ndCBiZWxvbmcgdG8gdGhpcyBwbHVnaW4pXG5cdFx0Ly8gVXNpbmcgdGhpcyBmdW5jdGlvbiB3aWxsIGF1dG9tYXRpY2FsbHkgcmVtb3ZlIHRoZSBldmVudCBsaXN0ZW5lciB3aGVuIHRoaXMgcGx1Z2luIGlzIGRpc2FibGVkLlxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0Y29uc29sZS5sb2coJ2NsaWNrJywgZXZ0KTtcblx0XHR9KTtcblxuXHRcdC8vIFdoZW4gcmVnaXN0ZXJpbmcgaW50ZXJ2YWxzLCB0aGlzIGZ1bmN0aW9uIHdpbGwgYXV0b21hdGljYWxseSBjbGVhciB0aGUgaW50ZXJ2YWwgd2hlbiB0aGUgcGx1Z2luIGlzIGRpc2FibGVkLlxuXHRcdHRoaXMucmVnaXN0ZXJJbnRlcnZhbCh3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4gY29uc29sZS5sb2coJ3NldEludGVydmFsJyksIDUgKiA2MCAqIDEwMDApKTtcblxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC52YXVsdC5vbihcIm1vZGlmeVwiLCAoZmlsZSkgPT4ge1xuXHRcdFx0dmFyIHBhdGggPSBmaWxlLnBhdGg7XG5cdFx0XHRwYXRoID0gcGF0aC5zdWJzdHJpbmcoMCwgcGF0aC5sYXN0SW5kZXhPZihcIi9cIikpO1xuXHRcdFx0aWYocGF0aCA9PSB0aGlzLnNldHRpbmdzLm15U2V0dGluZylcblx0XHRcdHtcdFxuXHRcdFx0XHQvL25ldyBOb3RpY2UoXCJ0ZW1wbGF0ZSBtb2RpZmllZFwiKTtcblx0XHRcdFx0dGhpcy5VcGRhdGVGaWxlcyhmaWxlKTtcblx0XHRcdH1cblxuXG5cdFx0fSkpO1xuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG5cblx0VXBkYXRlRmlsZXMoZmlsZTogVEFic3RyYWN0RmlsZSlcblx0e1xuXHRcdHZhciB0RmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVCeVBhdGgoZmlsZS5wYXRoKTtcblx0XHR2YXIgdGFnc0FycmF5IDogc3RyaW5nW10gPSBbXTtcblx0XHRpZih0RmlsZSBpbnN0YW5jZW9mIFRGaWxlKVxuXHRcdHtcblx0XHRcdHZhciB0YWdzT2JqID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRDYWNoZShmaWxlLnBhdGgpPy50YWdzO1xuXHRcdFx0XHRcdFxuXHRcdFx0dGFnc09iaj8uZm9yRWFjaCh0YWcgPT4ge1xuXHRcdFx0XHR0YWdzQXJyYXkucHVzaCh0YWcudGFnKTtcblx0XHRcdH0pO1xuXHRcdFx0bmV3IE5vdGljZShcInRhZ3MgY29sbGVjdGVkXCIpO1xuXHRcdFx0dmFyIGZpbGVzV2l0aFRhZ3MgPSB0aGlzLkZpbmRGaWxlc1dpdGhUYWcodGFnc0FycmF5KTtcblx0XHRcdG5ldyBOb3RpY2UoZmlsZXNXaXRoVGFncy5sZW5ndGgudG9TdHJpbmcoKSk7XG5cdFx0XHRcdGZpbGVzV2l0aFRhZ3MuZm9yRWFjaChlbGVtZW50ID0+IHtcblx0XHRcdFx0XHRpZih0RmlsZSAhPSBudWxsKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHRoaXMuTW9kaWZ5Q29udGVudChlbGVtZW50LCB0RmlsZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiZmlsZSBpcyBudWxsXCIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgTW9kaWZ5Q29udGVudChmaWxlOiBURmlsZSwgdGVtYXBsdGU6IFRGaWxlKVxuXHR7XG5cdFx0dmFyIHRlbXBsYXRlRnJvbnRtYXR0ZXIgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSh0ZW1hcGx0ZSk/LmZyb250bWF0dGVyO1xuXHRcdHZhciBmaWxlRnJvbnRtYXR0ZXIgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG5cdFx0aWYodGVtcGxhdGVGcm9udG1hdHRlciAhPSB1bmRlZmluZWQpXG5cdFx0e1xuXHRcdFx0Ly90aGlzIGlzIGFycmF5XG5cdFx0XHR2YXIgdGVtcGxhdGVQcm9wZXJ0aWVzID0gT2JqZWN0LmtleXModGVtcGxhdGVGcm9udG1hdHRlcik7XG5cdFx0XHR2YXIgZmlsZUNvbnRlbnQgOiBzdHJpbmdbXSA9IFtdO1xuXG5cdFx0XHRhd2FpdCBQcm9taXNlLnJlc29sdmUodGhpcy5hcHAudmF1bHQucmVhZChmaWxlKSkudGhlbigoY29udGVudCkgPT4ge1xuXHRcdFx0XHQvLyBQcm9taXNlLnJlc29sdmUoY29udGVudCkudGhlbigodGV4dCkgPT4ge1xuXHRcdFx0XHRcdFxuXHRcdFx0XHQvLyB9KTtcblx0XHRcdFx0ZmlsZUNvbnRlbnQgPSBjb250ZW50LnNwbGl0KFwiLS0tXCIpO1xuXHRcdFx0fSk7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IFwiXCI7XG5cdFx0XHRpZihmaWxlQ29udGVudC5sZW5ndGggPiAxKVxuXHRcdFx0e1xuXHRcdFx0XHQvL2hlcmUgSSBuZWVkIHRvIGFkZCBwcm9wZXJ0aWVzIHRvIGZpbGVcblx0XHRcdFx0dmFyIGZpbGVQcm9wZXJ0aWVzID0gZmlsZUNvbnRlbnRbMF1cblx0XHRcdFx0ZmlsZVByb3BlcnRpZXMgPSBmaWxlUHJvcGVydGllcy5yZXBsYWNlKFwiLS0tXCIsIFwiXCIpO1xuXHRcdFx0XHQvL25ldyBOb3RpY2UoZmlsZVByb3BlcnRpZXMpO1xuXHRcdFx0XHQvL2NoZWNraW5nIHdoaWNoIHByb3BlcnRpZXMgZnJvbSB0ZW1wbGF0ZSBhcmUgbm90IGluIGZpbGVcblx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaTx0ZW1wbGF0ZVByb3BlcnRpZXMubGVuZ3RoOyBpKyspXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZihmaWxlUHJvcGVydGllcy5pbmNsdWRlcyh0ZW1wbGF0ZVByb3BlcnRpZXNbaV0gKyBcIjpcIikpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Ly9wcm9wZXJ0eSBpcyBhbHJlYWR5IGluIGZpbGVcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdC8vcHJvcGVydHkgaXMgbm90IGluIGZpbGVcblx0XHRcdFx0XHRcdGZpbGVQcm9wZXJ0aWVzICs9IFwiXFxuXCIgKyB0ZW1wbGF0ZVByb3BlcnRpZXNbaV0gKyBcIjpcIjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0ZmlsZVByb3BlcnRpZXMgPSBcIi0tLVwiICsgZmlsZVByb3BlcnRpZXMgKyBcIlxcbi0tLVwiO1xuXHRcdFx0XHRuZXdDb250ZW50ICA9IGZpbGVQcm9wZXJ0aWVzICArIGZpbGVDb250ZW50WzJdO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHQvL2hlcmUgSSBqdXN0IG5lZWQgdG8gcGFzdGUgdGhlIGNvbnRlbnQgb2YgdGhlIHRlbXBsYXRlIHRvIHRoZSBmaWxlXG5cdFx0XHRcdG5ld0NvbnRlbnQgPSB0ZW1wbGF0ZUZyb250bWF0dGVyICsgZmlsZUNvbnRlbnRbMF07XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBuZXdDb250ZW50KTtcblx0XHRcdG5ldyBOb3RpY2UoXCJmaWxlIHVwZGF0ZWRcIik7XG5cdFx0fVxuXHR9XG5cblx0RmluZEZpbGVzV2l0aFRhZyh0YWdzOiBzdHJpbmdbXSlcblx0e1xuXHRcdHZhciBmaWxlc1dpdGhUYWcgOiBURmlsZVtdID0gW107XG5cblx0XHR0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZm9yRWFjaChmaWxlID0+IHtcblx0XHRcdGlmKGZpbGUucGF0aC5zdWJzdHJpbmcoMCwgZmlsZS5wYXRoLmxhc3RJbmRleE9mKFwiL1wiKSkgPT0gdGhpcy5zZXR0aW5ncy5teVNldHRpbmcpXG5cdFx0XHR7XG5cdFx0XHRcdFxuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgZmlsZVRhZ3MgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldENhY2hlKGZpbGUucGF0aCk/LnRhZ3M7XG5cblx0XHRcdFx0aWYoZmlsZVRhZ3MgIT0gdW5kZWZpbmVkKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dmFyIGZpbGVUYWdzQXJyYXkgOiBzdHJpbmdbXSA9IFtdO1xuXHRcdFx0XHRcdGZpbGVUYWdzPy5mb3JFYWNoKHRhZyA9PiB7XG5cdFx0XHRcdFx0XHRmaWxlVGFnc0FycmF5LnB1c2godGFnLnRhZyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0dmFyIGhhc0FsbFRhZ3MgPSB0cnVlO1xuXHRcdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0YWdzLmxlbmd0aDsgaSsrKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGlmKGZpbGVUYWdzQXJyYXkuaW5jbHVkZXModGFnc1tpXSkpXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRoYXNBbGxUYWdzID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZihoYXNBbGxUYWdzKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGZpbGVzV2l0aFRhZy5wdXNoKGZpbGUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHJldHVybiBmaWxlc1dpdGhUYWc7XG5cdH1cbn1cblxuY2xhc3MgU2FtcGxlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7Y29udGVudEVsfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLnNldFRleHQoJ1dvYWghJyk7XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHtjb250ZW50RWx9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG5jbGFzcyBTYW1wbGVTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogTXlQbHVnaW47XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTXlQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHtjb250YWluZXJFbH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ1RlbWFwbHRlIGZvbGRlcicpXG5cdFx0XHQuc2V0RGVzYygnc2VsZWN0IGZvbGRlciB3aGVyZSB0ZW1wbGF0ZXMgYXJlIHN0b3JlZCcpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignVGVtcGxhdGUgZm9sZGVyJylcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nKVxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZyA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSkpO1xuXHR9XG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBLHNCQUFxSTtBQVNySSxJQUFNLG1CQUFxQztBQUFBLEVBQzFDLFdBQVc7QUFDWjtBQUVBLElBQXFCLFdBQXJCLGNBQXNDLHVCQUFP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
